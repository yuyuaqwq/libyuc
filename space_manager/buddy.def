#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_4BIT_Get(BUDDY, LOGN, INDEX) ((INDEX) % 2 ? (LOGN)[(INDEX) / 2] & 0xf : (LOGN)[(INDEX) / 2] >> 4)
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_4BIT_Set(BUDDY, LOGN, INDEX, NEW_LOGN) ((LOGN)[(INDEX) / 2] = ((INDEX) % 2) ? ((NEW_LOGN) | ((LOGN)[(INDEX) / 2] & 0xf0)) : ((NEW_LOGN) << 4 | ((LOGN)[(INDEX) / 2] & 0xf)))


#ifndef LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME
#define LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME
#endif

#ifndef LIBYUC_SPACE_MANAGER_BUDDY_ACCESSOR_GetArray
#define LIBYUC_SPACE_MANAGER_BUDDY_ACCESSOR_GetArray(main_obj) ((obj)->obj_arr)
#endif

#ifndef LIBYUC_SPACE_MANAGER_BUDDY_ALLOCATOR_Create
#define LIBYUC_SPACE_MANAGER_BUDDY_ALLOCATOR_Create(main_obj, obj_type) MemoryAlloc(sizeof(obj_type))
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_ALLOCATOR_CreateMultiple
#define LIBYUC_SPACE_MANAGER_BUDDY_ALLOCATOR_CreateMultiple(main_obj, obj_type, count) ((obj_type*)MemoryAlloc(sizeof(obj_type) * count))
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_ALLOCATOR_Release
#define LIBYUC_SPACE_MANAGER_BUDDY_ALLOCATOR_Release(main_obj, obj) MemoryFree(obj)
#endif

#ifndef LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Type_DynamicArray
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Type_DynamicArray LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Type_Element*
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Const_StaticElementCount
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Const_StaticElementCount 1
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Const_InvalidId
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Const_InvalidId (-1)
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Const_InvalidDynamicArray
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Const_InvalidDynamicArray (NULL)
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Type_Id
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Type_Id size_t
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Type_Offset
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Type_Offset LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Type_Id
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Set
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Set(BUDDY, LOGN, INDEX, NEW) ((LOGN)[(INDEX)] = NEW)
#endif
#ifndef LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Get
#define LIBYUC_SPACE_MANAGER_BUDDY_INDEXER_Get(BUDDY, LOGN, INDEX) ((LOGN)[(INDEX)])
#endif


#define LIBYUC_SPACE_MANAGER_BUDDY_PARENT(index) LIBYUC_CONTAINER_CB_TREE_ONE_GET_PARENT(index)
#define LIBYUC_SPACE_MANAGER_BUDDY_LEFT_LEAF(index) LIBYUC_CONTAINER_CB_TREE_ONE_GET_LEFT(index)
#define LIBYUC_SPACE_MANAGER_BUDDY_RIGHT_LEAF(index) LIBYUC_CONTAINER_CB_TREE_ONE_GET_RIGHT(index)

#define Buddy MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, Buddy)

#define BuddyCreate MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, BuddyCreate)
#define BuddyInit MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, BuddyInit)
#define BuddyAlloc MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, BuddyAlloc)
#define BuddyAllocByOffset MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, BuddyAllocByOffset)
#define BuddyFree MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, BuddyFree)
#define BuddyGetAllocBlockSize MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, BuddyGetAllocBlockSize)
#define BuddyGetMaxFreeCount MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, BuddyGetMaxFreeCount)
#define BuddyGetMaxCount MAKE_NAME(LIBYUC_SPACE_MANAGER_BUDDY_CLASS_NAME, BuddyGetMaxCount)

